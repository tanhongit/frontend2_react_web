{"ast":null,"code":"import _regeneratorRuntime from\"/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Axios from\"axios\";import Cookie from'js-cookie';import{USER_SIGNIN_REQUEST,USER_SIGNIN_SUCCESS,USER_SIGNIN_FAIL,USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS,USER_REGISTER_FAIL,USER_LOGOUT,USER_UPDATE_REQUEST,USER_UPDATE_SUCCESS,USER_UPDATE_FAIL}from\"../constants/userConstants\";var update=function update(_ref){var userId=_ref.userId,name=_ref.name,email=_ref.email,password=_ref.password;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,userInfo,_yield$Axios$put,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_getState=getState(),userInfo=_getState.userSignin.userInfo;dispatch({type:USER_UPDATE_REQUEST,payload:{userId:userId,name:name,email:email,password:password}});_context.prev=2;_context.next=5;return Axios.put(\"/api/users/\"+userId,{name:name,email:email,password:password},{headers:{Authorization:'Bearer '+userInfo.token}});case 5:_yield$Axios$put=_context.sent;data=_yield$Axios$put.data;dispatch({type:USER_UPDATE_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);dispatch({type:USER_UPDATE_FAIL,payload:_context.t0.message});case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();};var signin=function signin(email,password){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:USER_SIGNIN_REQUEST,payload:{email:email,password:password}});_context2.prev=1;_context2.next=4;return Axios.post(\"/api/users/signin\",{email:email,password:password});case 4:_yield$Axios$post=_context2.sent;data=_yield$Axios$post.data;dispatch({type:USER_SIGNIN_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);dispatch({type:USER_SIGNIN_FAIL,payload:_context2.t0.message});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};var register=function register(name,email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var _yield$Axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:USER_REGISTER_REQUEST,payload:{name:name,email:email,password:password}});_context3.prev=1;_context3.next=4;return Axios.post(\"/api/users/register\",{name:name,email:email,password:password});case 4:_yield$Axios$post2=_context3.sent;data=_yield$Axios$post2.data;dispatch({type:USER_REGISTER_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);dispatch({type:USER_REGISTER_FAIL,payload:_context3.t0.message});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};var logout=function logout(){return function(dispatch){Cookie.remove(\"userInfo\");dispatch({type:USER_LOGOUT});};};export{signin,register,logout,update};","map":{"version":3,"sources":["/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/src/actions/userActions.js"],"names":["Axios","Cookie","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNIN_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_LOGOUT","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAIL","update","userId","name","email","password","dispatch","getState","userInfo","userSignin","type","payload","put","headers","Authorization","token","data","set","JSON","stringify","message","signin","post","register","logout","remove"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport Cookie from 'js-cookie';\nimport {\n  USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS,\n  USER_SIGNIN_FAIL, USER_REGISTER_REQUEST,\n  USER_REGISTER_SUCCESS, USER_REGISTER_FAIL, USER_LOGOUT, USER_UPDATE_REQUEST, USER_UPDATE_SUCCESS, USER_UPDATE_FAIL\n} from \"../constants/userConstants\";\n\nconst update = ({ userId, name, email, password }) => async (dispatch, getState) => {\n  const { userSignin: { userInfo } } = getState();\n  dispatch({ type: USER_UPDATE_REQUEST, payload: { userId, name, email, password } });\n  try {\n    const { data } = await Axios.put(\"/api/users/\" + userId,\n      { name, email, password }, {\n      headers: {\n        Authorization: 'Bearer ' + userInfo.token\n      }\n    });\n    dispatch({ type: USER_UPDATE_SUCCESS, payload: data });\n    Cookie.set('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({ type: USER_UPDATE_FAIL, payload: error.message });\n  }\n}\n\nconst signin = (email, password) => async (dispatch) => {\n  dispatch({ type: USER_SIGNIN_REQUEST, payload: { email, password } });\n  try {\n    const { data } = await Axios.post(\"/api/users/signin\", { email, password });\n    dispatch({ type: USER_SIGNIN_SUCCESS, payload: data });\n    Cookie.set('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({ type: USER_SIGNIN_FAIL, payload: error.message });\n  }\n}\n\nconst register = (name, email, password) => async (dispatch) => {\n  dispatch({ type: USER_REGISTER_REQUEST, payload: { name, email, password } });\n  try {\n    const { data } = await Axios.post(\"/api/users/register\", { name, email, password });\n    dispatch({ type: USER_REGISTER_SUCCESS, payload: data });\n    Cookie.set('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({ type: USER_REGISTER_FAIL, payload: error.message });\n  }\n}\n\nconst logout = () => (dispatch) => {\n  Cookie.remove(\"userInfo\");\n  dispatch({ type: USER_LOGOUT })\n}\nexport { signin, register, logout, update };"]},"metadata":{},"sourceType":"module"}